#!/bin/bash
# this is the openQRM commandline client

if [ "$OPENQRM_SERVER_BASE_DIR" == "" ]; then
	OPENQRM_SERVER_BASE_DIR=$(dirname $0)/../..
	OPENQRM_SERVER_BASE_DIR=$(pushd $OPENQRM_SERVER_BASE_DIR > /dev/null && echo $PWD && popd > /dev/null)
fi
. $OPENQRM_SERVER_BASE_DIR/openqrm/include/openqrm-functions
. $OPENQRM_SERVER_BASE_DIR/openqrm/include/openqrm-server-functions


function openqrm_usage() {
	echo "Usage:"
	echo "`basename $0` help			- This help screen"
	echo "`basename $0` bootimage		- Managing boot-images"
}


BOOT_IMAGE_NAME=$2
BOOT_IMAGE_VERSION=$3
BOOT_IMAGE_LOCATION=$4
BOOT_IMAGE_INITRD_TYPE=$5


case "$1" in

	bootimage)
		openqrm_server_create_kernel $BOOT_IMAGE_NAME $BOOT_IMAGE_VERSION $BOOT_IMAGE_LOCATION $BOOT_IMAGE_INITRD_TYPE
		;;
	*)
		openqrm_usage
		;;
esac